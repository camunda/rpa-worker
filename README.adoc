= Camunda RPA Worker

The Camunda RPA Runtime is designed to bridge the gap between Robotic Process Automation (RPA) bots and the Camunda
workflow engine, enabling you to seamlessly integrate your task workers with Camunda.

NOTE: *Experimental Features Notice:* The code in this repository is in the experimental stage and may be unstable.
Use at your own risk and avoid using in production environments.


== Getting Started

=== Obtaining the RPA Worker

Downloads and details for container images are available on the  https://github.com/camunda/rpa-worker/releases[Releases]
page.

=== Configuration

The RPA Worker can source its configuration either from a configuration file, or environment variables. The RPA Worker
will look for a file named `rpa-worker.properties` in the current directory.

==== Zeebe

Connecting to a Camunda cluster requires providing the configuration for the Zeebe client. The RPA Worker uses the
https://docs.camunda.io/docs/apis-tools/spring-zeebe-sdk/getting-started/#[Spring Zeebe] client, and so uses the same
https://docs.camunda.io/docs/apis-tools/spring-zeebe-sdk/getting-started/#configuring-the-camunda-8-connection[Configuration Properties].

.Example Camunda self-hosted configuration
----
camunda.client.mode=selfmanaged
camunda.client.zeebe.enabled=true
camunda.client.zeebe.grpc-address=http://zeebe.camunda.local
camunda.client.zeebe.rest-address=http://zeebe.camunda.local
----

.Example Camunda SaaS configuration
----
camunda.client.mode=saas
camunda.client.auth.client-id=<client id>
camunda.client.auth.client-secret=<client secret>
camunda.client.cluster-id=<cluster id>
camunda.client.region=<region>
----

TIP: When creating an API client in the Camunda Cloud Console, the autogenerated configuration file provided contains
all the necessary configuration for connecting to Camunda, and can be used as-is.

==== Python

When the RPA Worker sets up its Python environment it will install a default set of dependencies. 

NOTE: As the RPA Runtime is currently under very heavy development, the RPA Worker only installs an 
https://github.com/camunda/rpa-worker/blob/42df1047b4d5f1a7aebb730b514c9cd78f83a19e/src/main/resources/python/requirements.txt[extremely minimal] set of dependencies: 
the core `robotframework` library,
an early version of the Camunda Robot integration library,
and the `PyYAML` library. 
This list will be extended as the final default libraries decision is made, and the RPA Framework libraries are brought over, 
however any additional requirements can still be installed using the *Extra Requirements* configuration described below. 

Additional dependencies can be installed by providing a supplementary `requirements.txt` file with the 
`camunda.rpa.python.extra-requirements` property.


.extra-requirements.txt
----
numpy==1.26.4
jmespath
----

.rpa-worker.properties
----
camunda.rpa.python.extra-requirements=extra-requirements.txt
----

NOTE: Dependencies are only installed when initially setting up the Python environment. If the requirements list 
changes then the existing Python environment can be deleted, and it will be recreated with the new dependencies
the next time the RPA Worker starts.

== Robot Job Execution

The RPA Worker makes the following environment variables available to the Robot execution:


|===
|Variable |Description

|`RPA_WORKSPACE_ID`
|The workspace ID of the current job

|`RPA_WORKSPACE`
|The full path to the workspace of the current job

|`RPA_SCRIPT`
|The name of the currently executing script

|`RPA_EXECUTION_KEY`
|The execution key of the currently executing script

|`RPA_ZEEBE_JOB_KEY`
|The Zeebe Job Key which triggered the Robot execution

|`RPA_ZEEBE_BPMN_PROCESS_ID`
|The current BPMN process ID

|`RPA_ZEEBE_PROCESS_INSTANCE_KEY`
|The current process instance key

|===


== Configuration Reference

[stripes=even]
|===
|Property |Description| Default Value

3+| *Python Properties*

|camunda.rpa.python.path
|The directory in which the Python environment will be created
|`${user.dir}/python/venv/`

|camunda.rpa.python.download-url
|The URL from which the portable Python will be downloaded if no system Python is available (Windows only)
|`https://github.com/winpython/winpython/releases/download/11.2.20241228final/Winpython64-3.13.1.0dot.zip`

|camunda.rpa.python.download-hash
|The expected SHA-256 hash of the file at `download-url`
|`47b9a4ce75efb29d78dda80716d6c35f9a13621efd3a89ef8242a114ef8001a3`

|camunda.rpa.python.extra-requirements
|The path to additional Python requirements that should be installed when setting up the Python environment
|_None_

3+| *Local Script Library Properties*

|camunda.rpa.scripts.path
|The directory in which deployed scripts will be stored
|`${user.dir}/scripts/`


3+| *Robot Properties*

|camunda.rpa.robot.max-concurrent-jobs
|How many Robot jobs may run concurrently
|`1`

|camunda.rpa.robot.default-timeout
|The default timeout to use when no other timeout is specified (ISO 8601 duration string)
|`PT5M` (5 minutes)

3+| *Zeebe Properties*
|camunda.rpa.zeebe.rpa-task-prefix
|The prefix used to construct the task subscription key
|`camunda::RPA-Task::`

|camunda.rpa.zeebe.worker-tags
|The worker tag(s) this worker should subscribe to (comma-separated)
|`default`

3+| *Secrets Client Properties*
|camunda.rpa.zeebe.secrets.auth-endpoint
|The authentication endpoint that should be used for authenticating before sending secrets requests
|`https://login.cloud.camunda.io`

|camunda.rpa.zeebe.secrets.secrets-endpoint
|The endpoint providing the secrets service
|`https://cluster-api.cloud.camunda.io`

|===



== License

These source files are made available under the Camunda License Version 1.0.
